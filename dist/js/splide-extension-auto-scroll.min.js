/*!
 * @splidejs/splide-extension-auto-scroll
 * Version  : 0.5.3
 * License  : MIT
 * Copyright: 2023 Naotoshi Fujita
 */(function(S){typeof define=="function"&&define.amd?define(S):S()})(function(){"use strict";function S(n){n.length=0}function $(n,t,e){return Array.prototype.slice.call(n,t,e)}function _(n){return n.bind.apply(n,[null].concat($(arguments,1)))}function H(n){return requestAnimationFrame(n)}function N(n,t){return typeof t===n}var K=Array.isArray;_(N,"function"),_(N,"string"),_(N,"undefined");function B(n){return K(n)?n:[n]}function Y(n,t){B(n).forEach(t)}var En=Object.keys;function mn(n,t,e){if(n){var r=En(n);r=e?r.reverse():r;for(var o=0;o<r.length;o++){var c=r[o];if(c!=="__proto__"&&t(n[c],c)===!1)break}}return n}function wn(n){return $(arguments,1).forEach(function(t){mn(t,function(e,r){n[r]=t[r]})}),n}var hn=Math.min;function An(){var n=[];function t(u,s,a,d){o(u,s,function(f,p,v){var h="addEventListener"in f,y=h?f.removeEventListener.bind(f,p,a,d):f.removeListener.bind(f,a);h?f.addEventListener(p,a,d):f.addListener(a),n.push([f,p,v,a,y])})}function e(u,s,a){o(u,s,function(d,f,p){n=n.filter(function(v){return v[0]===d&&v[1]===f&&v[2]===p&&(!a||v[3]===a)?(v[4](),!1):!0})})}function r(u,s,a){var d,f=!0;return typeof CustomEvent=="function"?d=new CustomEvent(s,{bubbles:f,detail:a}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(s,f,!1,a)),u.dispatchEvent(d),d}function o(u,s,a){Y(u,function(d){d&&Y(s,function(f){f.split(" ").forEach(function(p){var v=p.split(".");a(d,v[0],v[1])})})})}function c(){n.forEach(function(u){u[4]()}),S(n)}return{bind:t,unbind:e,dispatch:r,destroy:c}}var J="move",Q="moved",yn="updated",W="drag",gn="dragged",X="scroll",Z="scrolled",Ln="destroy";function bn(n){var t=n?n.event.bus:document.createDocumentFragment(),e=An();function r(c,u){e.bind(t,B(c).join(" "),function(s){u.apply(u,K(s.detail)?s.detail:[])})}function o(c){e.dispatch(t,c,$(arguments,1))}return n&&n.event.on(Ln,e.destroy),wn(e,{bus:t,on:r,off:_(e.unbind,t),emit:o})}function U(n,t,e,r){var o=Date.now,c,u=0,s,a=!0,d=0;function f(){if(!a){if(u=n?hn((o()-c)/n,1):1,e&&e(u),u>=1&&(t(),c=o(),r&&++d>=r))return v();H(f)}}function p(E){!E&&y(),c=o()-(E?u*n:0),a=!1,H(f)}function v(){a=!0}function h(){c=o(),u=0,e&&e(u)}function y(){s&&cancelAnimationFrame(s),u=0,s=0,a=!0}function x(E){n=E}function T(){return a}return{start:p,rewind:h,pause:v,cancel:y,set:x,isPaused:T}}function Sn(n,t){var e;function r(){e||(e=U(t||0,function(){n(),e=null},null,1),e.start())}return r}var _n="is-active",Dn="slide",On="fade";function j(n,t,e){return Array.prototype.slice.call(n,t,e)}function I(n){return n.bind.apply(n,[null].concat(j(arguments,1)))}function D(n,t){return typeof t===n}function M(n){return!k(n)&&D("object",n)}var Tn=Array.isArray;I(D,"function"),I(D,"string");var Cn=I(D,"undefined");function k(n){return n===null}function Vn(n){return Tn(n)?n:[n]}function O(n,t){Vn(n).forEach(t)}function $n(n,t,e){n&&O(t,function(r){r&&n.classList[e?"add":"remove"](r)})}var Nn=Object.keys;function nn(n,t,e){if(n){var r=Nn(n);r=e?r.reverse():r;for(var o=0;o<r.length;o++){var c=r[o];if(c!=="__proto__"&&t(n[c],c)===!1)break}}return n}function tn(n){return j(arguments,1).forEach(function(t){nn(t,function(e,r){n[r]=t[r]})}),n}function In(n,t){O(n,function(e){O(t,function(r){e&&e.removeAttribute(r)})})}function en(n,t,e){M(t)?nn(t,function(r,o){en(n,o,r)}):O(n,function(r){k(e)||e===""?In(r,t):r.setAttribute(t,String(e))})}var rn=Math.min,on=Math.max,Zn=Math.floor,Un=Math.ceil,jn=Math.abs;function Mn(n,t,e){var r=rn(t,e),o=on(t,e);return rn(on(r,n),o)}var xn={speed:1,autoStart:!0,pauseOnHover:!0,pauseOnFocus:!0},Pn={startScroll:"Start auto scroll",pauseScroll:"Pause auto scroll"};function Fn(n,t,e){var r=bn(n),o=r.on,c=r.off,u=r.bind,s=r.unbind,a=t.Move,d=a.translate,f=a.getPosition,p=a.toIndex,v=a.getLimit,h=t.Controller,y=h.setIndex,x=h.getIndex,T=t.Direction.orient,E=t.Elements.toggle,zn=t.Layout.listSize,un=t.Live,P=n.root,Rn=Sn(t.Arrows.update,500),l={},m,A,F,z,R,C,an,fn,V,cn;function qn(){var i=e.autoScroll;l=tn({},xn,M(i)?i:{}),cn=l.fpsLock?1e3/l.fpsLock:void 0}function sn(){n.is(On)||!m&&e.autoScroll!==!1&&(m=U(0,Bn),Gn(),Kn())}function dn(){m&&(m.cancel(),m=null,C=void 0,c([J,W,X,Q,Z]),s(P,"mouseenter mouseleave focusin focusout"),s(E,"click"))}function Gn(){l.pauseOnHover&&u(P,"mouseenter mouseleave",function(i){F=i.type==="mouseenter",q()}),l.pauseOnFocus&&u(P,"focusin focusout",function(i){z=i.type==="focusin",q()}),l.useToggleButton&&u(E,"click",function(){A?g():L()}),o(yn,Hn),o([J,W,X],function(){R=!0,L(!1)}),o([Q,gn,Z],function(){R=!1,q()})}function Hn(){var i=e.autoScroll;i!==!1?(l=tn({},l,M(i)?i:{}),sn()):dn(),m&&!Cn(C)&&d(C)}function Kn(){l.autoStart&&(document.readyState==="complete"?g():u(window,"load",g))}function g(){G()&&(m.start(!0),un.disable(!0),z=F=A=!1,ln(),an=Date.now(),fn=f(),V=void 0)}function L(i){i===void 0&&(i=!0),A||(A=i,ln(),G()||(m.pause(),un.disable(!1)))}function q(){A||(F||z||R?L(!1):g())}function Bn(){var i=f(),w=Yn(i);w!==null&&(i!==w?(d(w),Jn(C=f())):(L(!1),l.rewind&&n.go(l.speed>0?0:t.Controller.getEnd())),Rn())}function Yn(i){var w=Date.now();if(l.fpsLock&&V&&w-V<cn/2)return null;var b=l.speed||1,Qn=l.virtualViewportSize||1e3,Wn=zn()/Qn,vn=l.virtualSpeed?Wn:1;if(l.fpsLock){var Xn=(w-an)*l.fpsLock/1e3,pn=T(Xn*b*vn)+fn;if(pn!==i)i=pn,V=w;else return null}else i+=T(b*vn);return n.is(Dn)&&(i=Mn(i,v(!1),v(!0))),i}function Jn(i){var w=n.length,b=(p(i)+w)%w;b!==x()&&(y(b),t.Slides.update(),t.Pagination.update(),e.lazyLoad==="nearby"&&t.LazyLoad.check())}function ln(){if(E){var i=A?"startScroll":"pauseScroll";$n(E,_n,!A),en(E,"aria-label",e.i18n[i]||Pn[i])}}function G(){return!m||m.isPaused()}return{setup:qn,mount:sn,destroy:dn,play:g,pause:L,isPaused:G}}typeof window<"u"&&(window.splide=window.splide||{},window.splide.Extensions=window.splide.Extensions||{},window.splide.Extensions.AutoScroll=Fn)});
