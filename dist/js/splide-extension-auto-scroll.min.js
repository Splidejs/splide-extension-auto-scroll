/*!
 * @splidejs/splide-extension-auto-scroll
 * Version  : 0.5.3
 * License  : MIT
 * Copyright: 2023 Naotoshi Fujita
 */(function(S){typeof define=="function"&&define.amd?define(S):S()})(function(){"use strict";function S(n){n.length=0}function V(n,t,r){return Array.prototype.slice.call(n,t,r)}function L(n){return n.bind.apply(n,[null].concat(V(arguments,1)))}function B(n){return requestAnimationFrame(n)}function $(n,t){return typeof t===n}var G=Array.isArray;L($,"function"),L($,"string"),L($,"undefined");function H(n){return G(n)?n:[n]}function K(n,t){H(n).forEach(t)}var ln=Object.keys;function vn(n,t,r){if(n){var e=ln(n);e=r?e.reverse():e;for(var o=0;o<e.length;o++){var c=e[o];if(c!=="__proto__"&&t(n[c],c)===!1)break}}return n}function pn(n){return V(arguments,1).forEach(function(t){vn(t,function(r,e){n[e]=t[e]})}),n}var En=Math.min;function mn(){var n=[];function t(u,s,a,d){o(u,s,function(f,p,l){var h="addEventListener"in f,y=h?f.removeEventListener.bind(f,p,a,d):f.removeListener.bind(f,a);h?f.addEventListener(p,a,d):f.addListener(a),n.push([f,p,l,a,y])})}function r(u,s,a){o(u,s,function(d,f,p){n=n.filter(function(l){return l[0]===d&&l[1]===f&&l[2]===p&&(!a||l[3]===a)?(l[4](),!1):!0})})}function e(u,s,a){var d,f=!0;return typeof CustomEvent=="function"?d=new CustomEvent(s,{bubbles:f,detail:a}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(s,f,!1,a)),u.dispatchEvent(d),d}function o(u,s,a){K(u,function(d){d&&K(s,function(f){f.split(" ").forEach(function(p){var l=p.split(".");a(d,l[0],l[1])})})})}function c(){n.forEach(function(u){u[4]()}),S(n)}return{bind:t,unbind:r,dispatch:e,destroy:c}}var Y="move",J="moved",wn="updated",Q="drag",hn="dragged",W="scroll",X="scrolled",An="destroy";function yn(n){var t=n?n.event.bus:document.createDocumentFragment(),r=mn();function e(c,u){r.bind(t,H(c).join(" "),function(s){u.apply(u,G(s.detail)?s.detail:[])})}function o(c){r.dispatch(t,c,V(arguments,1))}return n&&n.event.on(An,r.destroy),pn(r,{bus:t,on:e,off:L(r.unbind,t),emit:o})}function Z(n,t,r,e){var o=Date.now,c,u=0,s,a=!0,d=0;function f(){if(!a){if(u=n?En((o()-c)/n,1):1,r&&r(u),u>=1&&(t(),c=o(),e&&++d>=e))return l();B(f)}}function p(E){!E&&y(),c=o()-(E?u*n:0),a=!1,B(f)}function l(){a=!0}function h(){c=o(),u=0,r&&r(u)}function y(){s&&cancelAnimationFrame(s),u=0,s=0,a=!0}function I(E){n=E}function O(){return a}return{start:p,rewind:h,pause:l,cancel:y,set:I,isPaused:O}}function gn(n,t){var r;function e(){r||(r=Z(t||0,function(){n(),r=null},null,1),r.start())}return e}var bn="is-active",Sn="slide",Ln="fade";function U(n,t,r){return Array.prototype.slice.call(n,t,r)}function M(n){return n.bind.apply(n,[null].concat(U(arguments,1)))}function _(n,t){return typeof t===n}function N(n){return!j(n)&&_("object",n)}var _n=Array.isArray;M(_,"function"),M(_,"string");var Dn=M(_,"undefined");function j(n){return n===null}function On(n){return _n(n)?n:[n]}function D(n,t){On(n).forEach(t)}function Tn(n,t,r){n&&D(t,function(e){e&&n.classList[r?"add":"remove"](e)})}var Cn=Object.keys;function k(n,t,r){if(n){var e=Cn(n);e=r?e.reverse():e;for(var o=0;o<e.length;o++){var c=e[o];if(c!=="__proto__"&&t(n[c],c)===!1)break}}return n}function nn(n){return U(arguments,1).forEach(function(t){k(t,function(r,e){n[e]=t[e]})}),n}function Vn(n,t){D(n,function(r){D(t,function(e){r&&r.removeAttribute(e)})})}function tn(n,t,r){N(t)?k(t,function(e,o){tn(n,o,e)}):D(n,function(e){j(r)||r===""?Vn(e,t):e.setAttribute(t,String(r))})}var rn=Math.min,en=Math.max,Jn=Math.floor,Qn=Math.ceil,Wn=Math.abs;function $n(n,t,r){var e=rn(t,r),o=en(t,r);return rn(en(e,n),o)}var Mn={speed:1,autoStart:!0,pauseOnHover:!0,pauseOnFocus:!0},Nn={startScroll:"Start auto scroll",pauseScroll:"Pause auto scroll"};function In(n,t,r){var e=yn(n),o=e.on,c=e.off,u=e.bind,s=e.unbind,a=t.Move,d=a.translate,f=a.getPosition,p=a.toIndex,l=a.getLimit,h=t.Controller,y=h.setIndex,I=h.getIndex,O=t.Direction.orient,E=t.Elements.toggle,xn=t.Layout.listSize,on=t.Live,x=n.root,Pn=gn(t.Arrows.update,500),v={},m,A,P,F,R,T,un,an;function Fn(){var i=r.autoScroll;v=nn({},Mn,N(i)?i:{})}function fn(){n.is(Ln)||!m&&r.autoScroll!==!1&&(m=Z(0,Bn),Rn(),qn())}function cn(){m&&(m.cancel(),m=null,T=void 0,c([Y,Q,W,J,X]),s(x,"mouseenter mouseleave focusin focusout"),s(E,"click"))}function Rn(){v.pauseOnHover&&u(x,"mouseenter mouseleave",function(i){P=i.type==="mouseenter",z()}),v.pauseOnFocus&&u(x,"focusin focusout",function(i){F=i.type==="focusin",z()}),v.useToggleButton&&u(E,"click",function(){A?g():b()}),o(wn,zn),o([Y,Q,W],function(){R=!0,b(!1)}),o([J,hn,X],function(){R=!1,z()})}function zn(){var i=r.autoScroll;i!==!1?(v=nn({},v,N(i)?i:{}),fn()):cn(),m&&!Dn(T)&&d(T)}function qn(){v.autoStart&&(document.readyState==="complete"?g():u(window,"load",g))}function g(){q()&&(m.start(!0),on.disable(!0),F=P=A=!1,sn(),un=Date.now(),an=f())}function b(i){i===void 0&&(i=!0),A||(A=i,sn(),q()||(m.pause(),on.disable(!1)))}function z(){A||(P||F||R?b(!1):g())}function Bn(){var i=f(),w=Gn(i);i!==w?(d(w),Hn(T=f())):(b(!1),v.rewind&&n.go(v.speed>0?0:t.Controller.getEnd())),Pn()}function Gn(i){var w=v.speed||1,C=v.virtualViewportSize||1e3,Kn=xn()/C,dn=v.virtualSpeed?Kn:1;if(v.fpsLock){var Yn=(Date.now()-un)*v.fpsLock/1e3;i=O(Yn*w*dn)+an}else i+=O(w*dn);return n.is(Sn)&&(i=$n(i,l(!1),l(!0))),i}function Hn(i){var w=n.length,C=(p(i)+w)%w;C!==I()&&(y(C),t.Slides.update(),t.Pagination.update(),r.lazyLoad==="nearby"&&t.LazyLoad.check())}function sn(){if(E){var i=A?"startScroll":"pauseScroll";Tn(E,bn,!A),tn(E,"aria-label",r.i18n[i]||Nn[i])}}function q(){return!m||m.isPaused()}return{setup:Fn,mount:fn,destroy:cn,play:g,pause:b,isPaused:q}}typeof window<"u"&&(window.splide=window.splide||{},window.splide.Extensions=window.splide.Extensions||{},window.splide.Extensions.AutoScroll=In)});
